!function(){var a=window.hdil||(window.hdil={});a.timeline=function(){function a(a){a.each(function(f){function g(){var a=n.invert(d3.mouse(this)[0]),b=r(f,a,1),c=f[b-1],d=f[b]?f[b]:f[b-1],e=a-c.date.getTime()>d.date.getTime()-a?d:c;u.attr("transform","translate("+n(e.date)+","+m(e.value)+")"),u.select("text").text(function(){return 0===e.value?"":d3.format(",.0f")(e.value)})}var i,j={top:10,right:10,bottom:0,left:10},k=e-j.left-j.right,l=d-j.top-j.bottom;i=a.select("svg").empty()?a.append("svg").attr("width",e).attr("height",d).append("g").attr("transform","translate("+j.left+","+j.top+")"):a.select("svg").attr("width",e).attr("height",d).select("g").attr("transform","translate("+j.left+","+j.top+")");var m=d3.scaleLinear().rangeRound([l,0]),n=d3.scaleTime().rangeRound([0,k]),o=d3.area().x(function(a){return n(a.date)}).y1(function(a){return m(a.value)}).curve(d3.curveStep),p=d3.timeMonth.range(c),q=f.map(function(a){return a.date.getTime()});p.forEach(function(a){-1==q.indexOf(a.getTime())&&f.push({date:a,value:0})});var r=d3.bisector(function(a){return a.date}).left;n.domain(c),h?m.domain([0,b]):m.domain([0,d3.max(f,function(a){return a.value})]),o.y0(m(0));var s=i.selectAll("path").data([f]);s.enter().append("path").attr("fill","#00C5CA").attr("d",o),s.attr("d",o);var t=i.select(".xAxis");t.empty()?i.append("g").attr("class","xAxis").attr("transform","translate(0,"+l+")").call(d3.axisBottom(n).tickSize(-l)):t.call(d3.axisBottom(n).tickSize(-l));var u=i.select(".focus");u.empty()&&(u=i.append("g").attr("class","focus").style("display","none"),u.append("circle").attr("r",2),u.append("text").attr("text-anchor","middle").attr("font-size","10px").attr("dy","-3px"));var v=i.select(".overlay");if(v.empty()){var w=n(f[f.length-1].date)-n(f[0].date),x=n(f[0].date);i.append("rect").attr("class","overlay").attr("width",w).attr("height",l).attr("x",x).attr("fill","none").style("pointer-events","all").style("cursor","none").on("mouseover",function(){u.style("display",null)}).on("mouseout",function(){u.style("display","none")}).on("mousemove",g)}else v.on("mousemove",g)})}var b,c,d=600,e=600,f=d3.dispatch("brushEnd"),g=!1,h=!1,i=1e3;return a.height=function(b){return arguments.length?(d=b,a):d},a.width=function(b){return arguments.length?(e=b,a):e},a.extent=function(b){return arguments.length?(c=b,a):c},a.maxY=function(c){return arguments.length?(b=c,a):b},a.normalize=function(b){return arguments.length?(h=b,a):h},a.duration=function(b){return arguments.length?(i=b,a):i},a.resetBrush=function(b){return arguments.length?(g=b,a):g},a.on=function(){var b=f.on.apply(f,arguments);return b===f?a:b},a}}();